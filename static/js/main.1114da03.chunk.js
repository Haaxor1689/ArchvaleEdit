(this["webpackJsonparchvale-edit"]=this["webpackJsonparchvale-edit"]||[]).push([[0],{232:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var a,i=n(0),r=n(32),c=n.n(r),o=n(7),s=n(261),l=n(266),d=n(267),u=n(40),p=n.n(u),b=n(57),x=n(254),m=n(263),f=n(262),j=n(19),h=n(36),g=n(253),v=n(22),O=n(1),y=["initialValues","onSubmit","mutators","decorators","children","render"],k=["handleSubmit"],w=function(e){var t=e.initialValues,n=e.onSubmit,a=e.mutators,i=e.decorators,r=e.children,c=e.render,o=Object(h.a)(e,y);return Object(O.jsx)(v.a,{initialValues:t,onSubmit:n,mutators:a,decorators:i,subscription:{active:!0,submitting:!0},render:function(e){var t,n=e.handleSubmit,a=Object(h.a)(e,k);return Object(O.jsx)(g.a,Object(j.a)(Object(j.a)({component:"form",display:"flex",flexDirection:"column",onSubmit:n},o),{},{children:null!==(t=null===c||void 0===c?void 0:c(a))&&void 0!==t?t:r}))}})},S=n(6),C=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){var e,n;return t(null!==(e=null===(n=a.result.match(/;base64,(.*)/))||void 0===n?void 0:n[1])&&void 0!==e?e:"")},a.onerror=function(e){return n(e)}}))},M=function(e,t){var n=window.URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,a.click()},I=function(e,t){return function(n){return(t?e.required():e.nullable()).validate(n).then((function(){})).catch((function(e){return e.errors}))}},R=function(e){return parseInt("0x".concat(e))},A=function(e,t,n){return Object(S.a)(Array(e.length/t).keys()).map((function(e){return e*t})).map((function(n){return e.slice(n,n+t)})).map(n)},D="\n    -1px -1px 0 #000,  \n     1px -1px 0 #000,\n    -1px  1px 0 #000,\n\t\t 1px  1px 0 #000,\n\t\t 1px  3px 0 #000,\n\t\t 3px  2px 0 #000",F=n(260),z=n(79),B=["value","onChange"],q=function(e){var t=e.id,n=e.label,a=e.helperText,i=e.required,r=e.validate,c=void 0===r?i?z.a().required():z.a().nullable():r,o=e.disabled,s=e.acceptFileTypes,l=Object(v.c)(t,{validate:I(c),subscription:{value:!0,error:!0,touched:!0},type:"file",parse:function(e){return e}}),d=l.input,u=d.value,p=d.onChange,b=Object(h.a)(d,B),g=l.meta;return Object(O.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(O.jsxs)(x.a,{sx:{display:"flex",gap:4,alignItems:"baseline"},children:[Object(O.jsxs)(f.a,{variant:"contained",component:"label",disabled:o,children:[n,Object(O.jsx)("input",Object(j.a)(Object(j.a)({hidden:!0},b),{},{onChange:function(e){var t,n=e.target;return p(null===(t=n.files)||void 0===t?void 0:t[0])},accept:s&&s.length>1?s.join(", "):null===s||void 0===s?void 0:s[0],required:i}))]}),Object(O.jsx)(m.a,{sx:{color:"text.light",opacity:.6},children:u?u.name:"No file selected"})]}),(g.error&&g.touched||a)&&Object(O.jsx)(F.a,{error:g.error&&g.touched,children:g.error&&g.touched?g.error:a})]})},L=function(e){var t=e.setWorldData;return Object(O.jsxs)(w,{initialValues:{file:void 0},onSubmit:function(){var e=Object(b.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.file,e.t0=t,e.t1=a.name,e.t2=JSON,e.t3=atob,e.t4=atob,e.next=8,C(a);case 8:e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=(0,e.t3)(e.t6),e.t8=e.t2.parse.call(e.t2,e.t7),e.t9=[e.t1,e.t8],(0,e.t0)(e.t9);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sx:{gap:2,flexGrow:1},children:[Object(O.jsxs)(x.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(O.jsx)(m.a,{variant:"h1",children:"Select save file"}),Object(O.jsx)(f.a,{type:"submit",variant:"contained",size:"large",children:"Load"})]}),Object(O.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,gap:10},children:[Object(O.jsxs)(m.a,{textAlign:"center",variant:"body2",children:["Open a"," ",Object(O.jsx)(x.a,{component:"span",fontWeight:"bold",sx:{color:"badge"},children:'".avsv"'})," ","save file from"," ",Object(O.jsx)(x.a,{component:"span",fontWeight:"bold",sx:{color:"badge"},children:'"%AppData%\\AV_gms2_3"'})," ","folder."]}),Object(O.jsx)(q,{id:"file",label:"File",required:!0,acceptFileTypes:[".avsv"]})]})]})},P=n(265),N=n.p+"static/media/badgesTab.8c6bb8ef.png",T=n.p+"static/media/inventoryTab.6aa9bb77.png",E=n(264),H=[{name:"Ruby Brooch",description:"Increased melee damage",slots:2},{name:"Emerald Brooch",description:"Increased ranged damage",slots:2},{name:"Sapphire Brooch",description:"Increased magic damage",slots:2},void 0,void 0,{name:"Blue Ribbon",description:"Gain an additional protection heart",slots:1},void 0,{name:"Heart Clover",description:"Increased chance for enemies to drop hearts when low on health",slots:1},{name:"Star Magnet",description:"Massively increased pickup range for magic shards",slots:1},void 0,void 0,void 0,{name:"Arrow Bender ",description:"Ranged projectiles bend towards enemies",slots:2},void 0,void 0,void 0,{name:"Paladin's Light",description:"Melee weapons deal fire damage while at full HP",slots:2},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,{name:"Greedy Coin",description:"Slain enemies have a chance to drop extra gold",slots:1}],V=n.p+"static/media/panel.0ac675da.png",W=n.p+"static/media/minus.5ded2a5c.png",G=n.p+"static/media/plus.b6b7d11b.png",J=n(37),U=n(27),_=n.p+"static/media/slotAvailable.b594f1ef.png",Y=n.p+"static/media/slotUnavailable.0ccba859.png",K=n.p+"static/media/slotFilled.ebe2e6af.png",Q=n.p+"static/media/slotEmpty.b41f3577.png",X=n.p+"static/media/slotOverflow.c69323ff.png",Z=n.p+"static/media/slotLocked.42acef51.png",$=n.p+"static/media/slotsPanel.46f2b68c.png",ee=Object(U.b)(a||(a=Object(J.a)(["\n  0%, 50%, 100% {\n    opacity: 1;\n  }\n\n  25%, 75% {\n    opacity: 0.25;\n  }\n"]))),te=function(e){var t=e.unlocked,n=e.used,a=e.hover,i=Math.min(a<0?n+a:n,t),r=a<0?-a:0,c=a<0?0:Math.max(Math.min(a,t-n),0),o=Math.max(t-(i+r+c),0),s=Math.max(n+a-t,0),l=Math.max(9-(i+r+c+o+s),0);return Object(O.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",background:"url(".concat($,")"),gap:1,p:3,pb:7,mt:-5.5},children:[Object(S.a)(Array(i).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:K,sx:{width:"54px",height:"54px"}},e)})),Object(S.a)(Array(r).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:K,sx:{animation:"".concat(ee," 2s ease 0s infinite normal forwards"),width:"54px",height:"54px"}},e)})),Object(S.a)(Array(c).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:s?Y:_,sx:{animation:"".concat(ee," 2s ease 0s infinite normal forwards"),width:"54px",height:"54px"}},e)})),Object(S.a)(Array(o).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:Q,sx:{width:"54px",height:"54px"}},e)})),Object(S.a)(Array(s).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:X,sx:{width:"54px",height:"54px"}},e)})),Object(S.a)(Array(l).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:Z,sx:{width:"54px",height:"54px"}},e)}))]})},ne=n.p+"static/media/hover.c166b1cd.png",ae=n.p+"static/media/tile.e9bb0dd5.png",ie=n.p+"static/media/slot.629459f6.png",re=n(5),ce=n(258),oe=n(25),se=n(11),le=["className"],de=Object(se.a)((function(e){var t=e.className,n=Object(h.a)(e,le);return Object(O.jsx)(ce.a,Object(j.a)(Object(j.a)({},n),{},{classes:{popper:t}}))}))(Object(re.a)({},"& .".concat(oe.a.tooltip),{maxWidth:800,background:"rgba(0,0,0,0.75)",display:"flex",flexDirection:"column",gap:4})),ue=function(e){var t=e.title,n=e.children;return Object(O.jsx)(de,{title:t,followCursor:!0,placement:"bottom-start",children:n})},pe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?"brightness(".concat(t?1:.5,")"):"brightness(0)"},be=function(e){return e?" drop-shadow(3px 0 0 #2ce8f5) drop-shadow(-3px 0 0 #2ce8f5) drop-shadow(0 3px 0 #2ce8f5) drop-shadow(0 -3px 0 #2ce8f5)":""},xe=function(e){var t,n,a=e.unlocked,i=e.active,r=e.index,c=e.onClick,o=e.setHover,s=H[r];return Object(O.jsx)(ue,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{color:"badge",children:null!==(t=null===s||void 0===s?void 0:s.name)&&void 0!==t?t:"???"}),Object(O.jsx)(m.a,{color:"text.secondary",children:"Badge"}),Object(O.jsx)(m.a,{color:"highlight",children:null===s||void 0===s?void 0:s.description}),Object(O.jsx)(x.a,{sx:{display:"flex",gap:1},children:Object(S.a)(Array(null!==(n=null===s||void 0===s?void 0:s.slots)&&void 0!==n?n:0).keys()).map((function(e){return Object(O.jsx)(x.a,{component:"img",src:ie},e)}))})]}),children:Object(O.jsx)(E.a,{onClick:c,onContextMenu:function(e){e.preventDefault(),c(e)},onMouseEnter:function(){return o(r)},onMouseLeave:function(){return o(void 0)},sx:{height:116,width:108,background:"url(".concat(ae,")"),borderRadius:0,":hover":{background:"url(".concat(ne,")"),"& > img":{filter:"".concat(pe(a)).concat(be(i))}},"& > img":{filter:"".concat(pe(a,!1)).concat(be(i))}},children:Object(O.jsx)(x.a,{component:"img",src:"assets/badges/".concat(r+1,".png"),alt:"Badge ".concat(r+1)})})})},me=function(){var e,t,n=Object(v.c)("badges",{subscription:{value:!0},parse:function(e){return e}}).input,a=n.value,r=n.onChange,c=Object(v.c)("badges_equipped",{subscription:{value:!0},parse:function(e){return e}}).input,s=c.value,l=c.onChange,d=Object(v.c)("badge_slots",{subscription:{value:!0}}).input,u=d.value,p=d.onChange,b=A(s,2,(function(e){return Number(e)})),f=b.reduce((function(e,t){var n,a;return e+(null!==(n=null===(a=H[t])||void 0===a?void 0:a.slots)&&void 0!==n?n:0)}),0),j=Object(i.useState)(),h=Object(o.a)(j,2),g=h[0],y=h[1],k=void 0===g?0:(null!==(e=null===(t=H[g])||void 0===t?void 0:t.slots)&&void 0!==e?e:0)*(b.indexOf(g)>=0?-1:1),w=Math.max(f+k-u,0),C=function(e){return p({target:{value:Math.min(9,Math.max(f,e))}})};return Object(O.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column",alignSelf:"stretch",alignItems:"center"},children:[Object(O.jsx)(x.a,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr",background:"url(".concat(V,")"),gap:1,px:5,pt:4,pb:6},children:Object(S.a)(a).map((function(e,t){return Object(O.jsx)(xe,{index:t,active:b.indexOf(t)>=0,unlocked:"1"===e,onClick:function(e){!function(e,t){r({target:{value:a.substring(0,e)+("1"===a[e]&&t?"0":"1")+a.substring(e+1)}});var n=Object(S.a)(b),i=b.findIndex((function(t){return t===e}));i>=0?n.splice(i,1):t||w||n.push(e),l({target:{value:n.map((function(e){return e<10?"0".concat(e):"".concat(e)})).join("")}})}(t,2===e.button)},setHover:y},t)}))}),Object(O.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",gap:1},children:[Object(O.jsx)(E.a,{onClick:function(){return C(u-1)},sx:{width:60,height:60},children:Object(O.jsx)("img",{src:W,alt:"Minus"})}),Object(O.jsx)(te,{unlocked:Number(u),used:f,hover:k}),Object(O.jsx)(E.a,{onClick:function(){return C(u+1)},sx:{width:60,height:60},children:Object(O.jsx)("img",{src:G,alt:"Plus"})})]}),Object(O.jsx)(m.a,{variant:"caption",mt:2,children:"Right click to learn badge. Left click to equip badge. Use plus/minus to unlock badge slots."})]})},fe=n.p+"static/media/panel.19373d3a.png",je=n.p+"static/media/itemSlot.adefb0fe.png",he=n.p+"static/media/hoverSlot.db573466.png",ge=function(e){var t=e.index,n=e.id,a=e.count,i=e.quality,r=e.onClick,c=e.setHover;return Object(O.jsxs)(E.a,{onClick:r,onContextMenu:function(e){e.preventDefault(),null===r||void 0===r||r(e)},onMouseEnter:function(){return null===c||void 0===c?void 0:c(t)},onMouseLeave:function(){return null===c||void 0===c?void 0:c(void 0)},sx:{position:"relative",height:116,width:108,background:"url(".concat(je,")"),borderRadius:0,":hover":{background:"url(".concat(he,")")}},children:[a>1&&Object(O.jsx)(m.a,{variant:"body2",sx:{position:"absolute",bottom:22,right:16,textShadow:D},children:a}),Object(O.jsx)(m.a,{color:"badge",sx:{textShadow:D},children:n}),i>0&&Object(O.jsxs)(m.a,{variant:"caption",color:"uncommon",sx:{textShadow:D},children:["+",i]})]})},ve=n.p+"static/media/emptySlot.17657b83.png",Oe=function(){return Object(O.jsx)(x.a,{sx:{height:116,width:108,background:"url(".concat(ve,")"),backgroundPosition:"bottom",backgroundRepeat:"no-repeat",":hover":{background:"url(".concat(he,")")}}})},ye=function(){var e=Object(v.c)("inventory",{subscription:{value:!0}}).input.value,t=A(e,7,(function(e){return"FFFF000"===e?void 0:{id:R(e.slice(0,4)),count:R(e.slice(4,6)),quality:R(e[6])}}));return Object(O.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column",alignSelf:"stretch",alignItems:"center"},children:[Object(O.jsx)(x.a,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr",background:"url(".concat(fe,")"),backgroundRepeat:"no-repeat",gap:1,px:5,pt:5,pb:27,"> *:first-child":{mb:4}},children:t.map((function(e,t){return e?Object(O.jsx)(ge,Object(j.a)({index:t},e)):Object(O.jsx)(Oe,{})}))}),Object(O.jsx)(m.a,{variant:"caption",mt:2,children:"TODO: Inventory manipulation, item database."})]})},ke=n.p+"static/media/tab.7ce45cb6.png",we=function(e){var t=e.name,n=e.icon,a=e.active,i=e.onClick;return Object(O.jsx)(E.a,{onClick:i,sx:{display:"flex",alignItems:"end",background:"url(".concat(ke,")"),px:5.5,pt:4,pb:0,borderRadius:0,transition:"transform 0.2s",transform:a?void 0:"translateY(50%)",":hover":{filter:"brightness(1.5)",backgroundColor:"unset"}},children:Object(O.jsx)("img",{src:n,alt:t})},t)},Se=[{name:"inventory",icon:T,component:Object(O.jsx)(ye,{})},{name:"badges",icon:N,component:Object(O.jsx)(me,{})}],Ce=function(e){var t,n=Object(o.a)(e.save,2),a=n[0],r=n[1],c=e.reset,s=Object(i.useState)("inventory"),l=Object(o.a)(s,2),d=l[0],u=l[1];return Object(O.jsxs)(w,{initialValues:r,onSubmit:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data:application/octet-stream;base64,".concat(btoa(btoa(JSON.stringify(t)))),e.next=3,fetch(n).then((function(e){return e.blob()}));case 3:i=e.sent,M(i,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sx:{display:"flex",gap:6,alignItems:"flex-start"},children:[Object(O.jsxs)(g.a,{sx:{alignSelf:"stretch",display:"flex",alignItems:"center",gap:2},children:[Object(O.jsx)(m.a,{variant:"h1",sx:{flexGrow:1},children:"Save Editor"}),Object(O.jsx)(f.a,{onClick:c,children:"Discard"}),Object(O.jsx)(f.a,{type:"submit",variant:"contained",size:"large",children:"Save"})]}),Object(O.jsx)(g.a,{sx:{display:"flex",alignSelf:"center",gap:2,mb:-6,overflow:"hidden"},children:Se.map((function(e){return Object(O.jsx)(we,Object(j.a)(Object(j.a)({},e),{},{active:e.name===d,onClick:function(){return u(e.name)}}),e.name)}))}),null===(t=Se.find((function(e){return e.name===d})))||void 0===t?void 0:t.component,Object(O.jsx)(m.a,{variant:"h2",children:"Raw world data:"}),Object(O.jsx)(P.a,{sx:{whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:300,overflowY:"auto",fontFamily:"monospace",fontSize:"1rem",textShadow:"none",p:3},children:Object(O.jsx)(v.b,{subscription:{values:!0},children:function(e){var t=e.values;return JSON.stringify(t,null,2)}})})]})},Me=n(80),Ie=(n(232),n.p+"static/media/background.9a6f1d9f.png"),Re=Object(Me.a)({palette:{text:{secondary:"#5a6988"},error:{main:"#e43b44"},success:{main:"#63c74d"},badge:"#2ce8f5",highlight:"#fee761",uncommon:"#55c157",mode:"dark",primary:{main:"#ffc825"},background:{default:"#262b44"}},typography:{fontSize:20,fontFamily:'"Press Start 2P", Arial',h1:{fontSize:"4rem"},h2:{fontSize:"3rem"},caption:{fontSize:"0.666rem"},body2:{fontSize:"0.95rem"}},spacing:6,components:{MuiCssBaseline:{styleOverrides:{body:{position:"relative"},"body:before":{content:'" "',position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1,opacity:.2,backgroundImage:"url(".concat(Ie,")"),backgroundPosition:"bottom",backgroundSize:"cover",backgroundRepeat:"no-repeat",imageRendering:"pixelated",filter:"saturate(1) blur(10px)"}}}}}),Ae=function(){var e=Object(i.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(O.jsxs)(s.a,{theme:Re,children:[Object(O.jsx)(l.a,{}),Object(O.jsx)(d.a,{maxWidth:"lg",component:"main",sx:{display:"flex",flexDirection:"column",minHeight:"100vh",py:6},children:n?Object(O.jsx)(Ce,{save:n,reset:function(){return a(void 0)}}):Object(O.jsx)(L,{setWorldData:a})})]})};c.a.render(Object(O.jsx)(i.StrictMode,{children:Object(O.jsx)(Ae,{})}),document.getElementById("root"))}},[[233,1,2]]]);
//# sourceMappingURL=main.1114da03.chunk.js.map